***
Git
***


Command Reference
=================

Stashing
--------

- List the stashes

  .. code:: bash

     $ git stash list

- Show the stashes

  .. code:: bash

     $ git stash show [<stash>]

- Show the stashes as patches

  .. code:: bash

     $ git stash show -p [<stash>]

- Create a new stash

  .. code:: bash

     $ git stash push -m "<message>" <file1> [<file2>, ...]

  Only tracked files can be stashed, so be sure to add any untracked files
  before creating a new stash and adding them to it.

- Retrieve a stash and apply it to the working directory

  .. code:: bash

     $ git stash pop [<stash>]


Adding Changes to an Earlier Commit
-----------------------------------

The previous commit can be appended with ``git commit --amend``.

For any commit before the previous one, it is necessary to use ``git rebase``.

- Rebase to the commit **before** the one that you want to change

  .. code:: bash

     $ git rebase -i <HASH>

  This will open a text editor with a list of the more recent commits
  following the one that you just rebased to.

- Change ``pick`` to ``edit`` for any commit that you want to modify
  and then save and close the file

- Add changes with

  .. code:: bash

     $ git add <file1> [<file2> ...]

- Commit the changes

  - with

    .. code:: bash

       $ git commit --amend

    if you'd like to specify a new commit message

  - with

    .. code:: bash

       $ git commit --amend --no-edit

    if you'd like to keep the original commit message

- Go to the next commit to be edited or finish the process with

  .. code:: bash

     $ git rebase --continue



GitHub
======

Git Credentials for GitHub
--------------------------

.. code:: bash

    $ git config --local user.name dmrauch
    $ git config --local user.email 17890191+dmrauch@users.noreply.github.com


SSH Authentication
------------------

From August 2021, GitHub will no longer allow password-based authentication for git operations: https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/

- Connecting to GitHub with SSH: https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh

  - Adding a new SSH key to your GitHub account: https://docs.github.com/en/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account
  - Testing the SSH connection: https://docs.github.com/en/github/authenticating-to-github/testing-your-ssh-connection
  - GitHub's SSH key fingerprints: https://docs.github.com/en/github/authenticating-to-github/githubs-ssh-key-fingerprints
  - Working with SSH key passphrases: https://docs.github.com/en/github/authenticating-to-github/working-with-ssh-key-passphrases


GitHub Pages
------------

There are two kinds of GitHub Pages [#fGitHubPages]_:

- **user/organisation site**: Hosted at ``<username>.github.io``. For these,
  you need to create a repository names ``<username>.github.io``
- **project site**: Hosted at ``<username>.github.io/<project>``. These can
  be created for any repository.

GitHub only allows specific folders where the documentation can be located
for it to be served as a GitHub Pages site [#fGitHubPagesSources]_. For project
sites, these are:

- the repository's root/main folder
- the ``docs`` folder

However, it allows selection of the branch that should be used as the source.
Typical choices are the ``docs`` folder on a branch called ``gh-pages``. This
way, the project source code (including the source code of documentation) and
the (compiled) website can be kept separately.

A good step-by-step introduction and tutorial is given in
[#fGitHubPagesTutorial]_.

A published *GitHub Pages* site can be removed/unpublished by selecting `None`
as the publishing source [#fGitHubPagesUnpublish]_. If the site was published from
the ``gh-pages`` branch, it may have to be deleted as well?


.. rubric:: Links

.. [#fGitHubPages] https://pages.github.com/
.. [#fGitHubPagesSources] https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site
.. [#fGitHubPagesTutorial] https://www.docslikecode.com/articles/github-pages-python-sphinx/
.. [#fGitHubPagesUnpublish] https://docs.github.com/en/pages/getting-started-with-github-pages/unpublishing-a-github-pages-site
